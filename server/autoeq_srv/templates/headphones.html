{% extends "page.html" %}
{% block title %}Find my headphones{% endblock %}
{% block page_content %}
  <h1>The Big List of Headphones</h1>
  <p class="lead">
    We've currently got {{ headphones|length }} headphones listed, use search and sort to find yours.
  </p>
  <p>
    Once you've found your headphones to download a zip archive containing a
    pair of convolution filters (WAV files). These correct your headphones to an
    appropriate Harman target. They should sound better using them.
  </p>
  <table  class="table table-striped" data-toggle="table" data-search="true">
    <thead class="thead-dark">
      <tr>
        <th data-field="type" data-sortable="true">Type</th>
        <th data-field="name" data-sortable="true">Name</th>
        <th data-field="download" data-sortable="false" searchable="false">Filters</th>
      </tr>
    </thead>
    <tbody>
    {{ phone_rows(headphones) }}
    </tbody>
  </table>
{% endblock page_content %}

{% macro phone_rows(headphones) %}
  {%- for model in headphones -%}
    {{ phone_row(model) }}
  {%- endfor -%}
{% endmacro %}

{% macro phone_row(model) %}
    <tr>
      <td>{{ model.type }}</td>
      <td>{{ model.name }}</td>
      <td><a href="/api/filters/{{ model.type }}/{{ model.name }}" class="btn btn-primary btn-lg" role="button" aria-disabled="true">Get Filters</a></td>
    </tr>
{% endmacro %}
